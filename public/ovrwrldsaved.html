<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Saved Coordinates</title>
<link rel="stylesheet" href="../style.css">
<link href='https://fonts.googleapis.com/css?family=Pixelify Sans' rel='stylesheet'>

<style>
body{
    background:#111;
    color:white;
    font-family:'Pixelify Sans', sans-serif;
    text-align:center;
}

.saved-container{
    width:80%;
    margin:60px auto;
    border:3px solid white;
    padding:40px;
}

.saved-entry{
    border-bottom:1px solid #555;
    padding:15px 0;
}

.back-btn {
    color: #7CFF5B;     
    text-decoration: none;
    font-weight: bold;
    padding: 8px 12px;
    border: 2px solid #7CFF5B;
    border-radius: 5px;
    transition: all 0.3s ease;
    display: inline-block;   /* ensures link behaves like a button */
    pointer-events: auto;    /* ensures it’s clickable */
    cursor: pointer;         /* shows pointer on hover */
}

.back-btn:hover {
    color: rgb(155, 78, 231);
    border-color: rgb(155, 78, 231);
    text-decoration: underline;
    transform: scale(1.05);
}
</style>
</head>

<h2 class="saved-title">
SAVED COORDINATES OF<br>STRUCTURES AND BIOMES
</h2>

<div class="saved-grid" id="savedContainer"></div>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const savedContainer = document.getElementById("savedContainer");

  function renderCards() {
    savedContainer.innerHTML = ""; // clear existing cards
    const savedCoords = JSON.parse(localStorage.getItem("coordsData")) || [];

    savedCoords.forEach((item, index) => {
      const card = document.createElement("div");
      card.classList.add("saved-card");
      card.innerHTML = `
        <div class="card-image">
          <img src="${item.imgSrc}" alt="Structure Image">
        </div>
        <div class="card-info">
          <p><strong>User:</strong> ${item.username}</p>
          <p><strong>Title:</strong> ${item.title}</p>
          <p><strong>Dimension:</strong> ${item.dimension}</p>
          <p><strong>Type:</strong> ${item.type}</p>
          <p><strong>Which:</strong> ${item.which}</p>
          <p class="coords">
            <span class="coords-default">${item.coords}</span>
            <div class="coords-expanded">
            ${item.coords.split(',').map((c, i) => {
                const label = ['X','Y','Z'][i] || '';
                return `<p>${label}: ${c.trim()}</p>`;
            }).join('')}
            </div>
          </p>
          <button class="delete-btn" data-index="${index}">Delete</button>
        </div>
      `;
      savedContainer.appendChild(card);
    });

    // attach delete event
    const deleteButtons = document.querySelectorAll(".delete-btn");
    deleteButtons.forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = e.target.dataset.index;
        let savedCoords = JSON.parse(localStorage.getItem("coordsData")) || [];
        savedCoords.splice(idx, 1); // remove from array
        localStorage.setItem("coordsData", JSON.stringify(savedCoords));
        renderCards(); // re-render cards
      });
    });
  }

  renderCards(); // initial render
});
</script>

<a href="ovrwrldcoords.html" class="back-btn">← Back</a>
<script src="../saved.js"></script>
</html>